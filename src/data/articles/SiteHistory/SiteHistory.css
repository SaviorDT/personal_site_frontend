/* SiteHistory.css - 視覺化時間軸設計 
 * 
 * 偏移系統說明：
 * - offset-small: 3% 邊距
 * - offset-medium: 10% 邊距  
 * - offset-large: 15% 邊距
 * 
 * 使用方式：
 * - .milestone.left.offset-{size}
 * - .milestone.right.offset-{size}
 */

/* 極光背景動畫 - 更細緻的效果 */
@keyframes aurora {
  0% {
    transform: translateX(-100%) rotate(0deg) scale(1);
    opacity: 0.4;
  }
  15% {
    opacity: 0.8;
  }
  30% {
    transform: translateX(-20%) rotate(60deg) scale(1.1);
    opacity: 0.6;
  }
  50% {
    transform: translateX(100vw) rotate(180deg) scale(0.9);
    opacity: 0.7;
  }
  70% {
    opacity: 0.9;
  }
  85% {
    transform: translateX(120%) rotate(270deg) scale(1.05);
    opacity: 0.5;
  }
  100% {
    transform: translateX(-100%) rotate(360deg) scale(1);
    opacity: 0.4;
  }
}

@keyframes aurora-secondary {
  0% {
    transform: translateX(100vw) rotate(180deg) scale(0.8);
    opacity: 0.3;
  }
  20% {
    opacity: 0.7;
  }
  40% {
    transform: translateX(20%) rotate(120deg) scale(1.2);
    opacity: 0.5;
  }
  60% {
    transform: translateX(-50%) rotate(60deg) scale(0.9);
    opacity: 0.8;
  }
  80% {
    opacity: 0.4;
  }
  100% {
    transform: translateX(100vw) rotate(180deg) scale(0.8);
    opacity: 0.3;
  }
}

@keyframes aurora-tertiary {
  0% {
    transform: translateY(-100%) rotate(45deg) scale(1.1);
    opacity: 0.2;
  }
  25% {
    opacity: 0.6;
  }
  50% {
    transform: translateY(100vh) rotate(225deg) scale(0.8);
    opacity: 0.4;
  }
  75% {
    opacity: 0.7;
  }
  100% {
    transform: translateY(-100%) rotate(405deg) scale(1.1);
    opacity: 0.2;
  }
}

@keyframes aurora-glow {
  0%, 100% {
    filter: blur(3px) brightness(1) hue-rotate(0deg);
    /* opacity: 0.8; */
  }
  25% {
    filter: blur(4px) brightness(1.3) hue-rotate(90deg);
    /* opacity: 0.9; */
  }
  50% {
    filter: blur(5px) brightness(1.6) hue-rotate(180deg);
    /* opacity: 1.0; */
  }
  75% {
    filter: blur(4px) brightness(1.2) hue-rotate(270deg);
    /* opacity: 0.9; */
  }
}

/* 極光背景容器 - 最下層 */
.aurora-background {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
  z-index: -50; /* 確保在最下層 */
  background: linear-gradient(135deg, 
    #0a0a1a 0%, 
    #1a1a2e 15%, 
    #16213e 35%, 
    #0f3460 65%, 
    #1a1a2e 85%,
    #0a0a1a 100%
  );
}

/* 第一層極光 - 主要層 */
.aurora-background::before {
  content: '';
  position: absolute;
  top: -70%;
  left: -70%;
  width: 240%;
  height: 240%;
  background: conic-gradient(
    from 0deg at 60% 40%,
    transparent 0deg,
    rgba(34, 211, 238, 0.4) 45deg,
    rgba(147, 51, 234, 0.5) 90deg,
    rgba(16, 185, 129, 0.4) 135deg,
    rgba(59, 130, 246, 0.5) 180deg,
    rgba(236, 72, 153, 0.4) 225deg,
    rgba(251, 191, 36, 0.3) 270deg,
    rgba(168, 85, 247, 0.4) 315deg,
    transparent 360deg
  );
  animation: aurora 25s linear infinite;
  border-radius: 60%;
  mix-blend-mode: screen;
  z-index: -49; /* 極光層1 */
}

/* 第二層極光 - 次要層 */
.aurora-background::after {
  content: '';
  position: absolute;
  top: -40%;
  right: -40%;
  width: 180%;
  height: 180%;
  background: conic-gradient(
    from 180deg at 30% 70%,
    transparent 0deg,
    rgba(168, 85, 247, 0.3) 30deg,
    rgba(34, 197, 94, 0.4) 60deg,
    rgba(251, 191, 36, 0.3) 90deg,
    rgba(239, 68, 68, 0.4) 120deg,
    rgba(59, 130, 246, 0.3) 150deg,
    rgba(16, 185, 129, 0.4) 180deg,
    rgba(34, 211, 238, 0.3) 210deg,
    transparent 240deg
  );
  animation: aurora-secondary 18s linear infinite;
  border-radius: 45%;
  mix-blend-mode: screen;
  z-index: -48; /* 極光層2 */
}

/* 第三層極光 - 垂直流動層 */
.aurora-layer-tertiary {
  position: absolute;
  top: -50%;
  left: 20%;
  width: 120%;
  height: 200%;
  background: linear-gradient(
    45deg,
    transparent 0%,
    rgba(34, 211, 238, 0.2) 20%,
    rgba(147, 51, 234, 0.3) 35%,
    rgba(16, 185, 129, 0.2) 50%,
    rgba(59, 130, 246, 0.3) 65%,
    rgba(236, 72, 153, 0.2) 80%,
    transparent 100%
  );
  animation: aurora-tertiary 22s ease-in-out infinite;
  border-radius: 30%;
  mix-blend-mode: overlay;
  z-index: -47; /* 極光層3 */
}

/* 極光粒子效果 */
.aurora-particles {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-image: 
    radial-gradient(2px 2px at 20% 20%, rgba(34, 211, 238, 0.8), transparent),
    radial-gradient(2px 2px at 40% 40%, rgba(147, 51, 234, 0.8), transparent),
    radial-gradient(1px 1px at 60% 60%, rgba(16, 185, 129, 0.8), transparent),
    radial-gradient(2px 2px at 80% 80%, rgba(59, 130, 246, 0.8), transparent),
    radial-gradient(1px 1px at 30% 70%, rgba(236, 72, 153, 0.8), transparent),
    radial-gradient(1px 1px at 70% 30%, rgba(251, 191, 36, 0.8), transparent);
  background-size: 
    200px 200px,
    300px 300px,
    150px 150px,
    250px 250px,
    180px 180px,
    220px 220px;
  animation: aurora-glow 8s ease-in-out infinite alternate;
  opacity: 0.6;
  z-index: -46; /* 極光粒子層 */
}

/* 文章介紹部分 */
.article-intro {
  margin-bottom: 4rem;
  text-align: center;
  position: relative;
  z-index: 10; /* 內容層 */
}

.lead-paragraph {
  font-size: 1.3rem;
  line-height: 1.8;
  color: var(--text-secondary);
  margin-bottom: 0;
  max-width: 800px;
  margin: 0 auto;
  text-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
  background: rgba(255, 255, 255, 0.05);
  backdrop-filter: blur(10px);
  padding: 2rem;
  border-radius: 16px;
  border: 1px solid rgba(255, 255, 255, 0.1);
  position: relative;
  z-index: 11; /* 引言段落 */
}

/* 旅程時間軸 */
.journey-timeline {
  position: relative;
  margin: 4rem 0;
  overflow: hidden;
  z-index: 10; /* 內容層 */
}

.timeline-path {
  p  .milestone.left::after {
    right: -50px;
  }

  .milestone.left::before {
    right: -58px;
  }

  .milestone.right::after {
    left: -50px;
  }

  .milestone.right::before {
    left: -58px;
  }
}

/* 時間軸容器 */
.timeline-path {
  position: relative;
  width: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4rem; /* 節點之間的間距 */
}

/* 中央時間軸線 - 增強不透明度 */
.timeline-path::before {
  content: '';
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  top: 0;
  bottom: 0;
  width: 10px;
  background: linear-gradient(
    to bottom,
    rgba(34, 211, 238, 0.2) 0%,
    rgba(34, 211, 238, 1) 5%,
    rgba(147, 51, 234, 1) 25%,
    rgba(16, 185, 129, 1) 50%,
    rgba(59, 130, 246, 1) 75%,
    rgba(236, 72, 153, 1) 95%,
    rgba(236, 72, 153, 0.2) 100%
  );
  border-radius: 5px;
  z-index: 20; /* 時間軸主線 */
  animation: aurora-glow 6s ease-in-out infinite alternate;
  opacity: 1; /* 確保完全不透明 */
}

/* SVG 曲線路徑 - 隱藏，改為用 CSS 創建連接線 */
.timeline-curve {
  display: none;
}

/* 里程碑節點 - 最上層 */
.milestone {
  position: relative;
  z-index: 30; /* 里程碑節點 */
  max-width: 400px;
  width: 100%;
  animation: fadeInUp 0.8s ease-out;
  margin-bottom: 1rem;
}

/* 節點連接到時間軸的線條 - 增強不透明度 */
.milestone::after {
  content: '';
  position: absolute;
  top: 50%;
  width: 50px;
  height: 4px;
  background: linear-gradient(
    to right,
    rgba(34, 211, 238, 1),
    rgba(147, 51, 234, 1),
    rgba(16, 185, 129, 1)
  );
  box-shadow: 
    0 0 18px rgba(34, 211, 238, 1),
    0 0 30px rgba(147, 51, 234, 0.8),
    0 0 8px rgba(255, 255, 255, 0.6);
  border-radius: 3px;
  z-index: 22; /* 連接線 */
  transform: translateY(-50%);
  animation: aurora-glow 4s ease-in-out infinite alternate;
  border: 1px solid rgba(255, 255, 255, 0.4);
  opacity: 1; /* 確保完全不透明 */
}

/* 節點上的圓點標記 - 更明顯 */
.milestone::before {
  content: '';
  position: absolute;
  top: 50%;
  width: 16px;
  height: 16px;
  background: radial-gradient(
    circle,
    #ffffff 0%,
    #ffffff 25%,
    rgba(34, 211, 238, 1) 30%,
    rgba(147, 51, 234, 1) 60%,
    rgba(16, 185, 129, 1) 100%
  );
  border: 2px solid rgba(255, 255, 255, 1);
  border-radius: 50%;
  box-shadow: 
    0 0 25px rgba(34, 211, 238, 1),
    0 0 40px rgba(147, 51, 234, 1),
    0 0 60px rgba(16, 185, 129, 0.8),
    inset 0 0 8px rgba(255, 255, 255, 1);
  z-index: 23; /* 圓點標記 */
  transform: translateY(-50%);
  animation: aurora-glow 3s ease-in-out infinite alternate;
  opacity: 1; /* 確保完全不透明 */
}

/* 左側節點 */
.milestone.left {
  align-self: flex-start;
  margin-left: 5%;
}

.milestone.left::after {
  right: -50px; /* 連接線指向右側中央軸線 */
}

.milestone.left::before {
  right: -58px; /* 圓點在連接線末端 */
}

/* 左側節點偏移變體 */
.milestone.left.offset-small {
  margin-left: 3%;
}

.milestone.left.offset-medium {
  margin-left: 10%;
}

.milestone.left.offset-large {
  margin-left: 15%;
}

/* 右側節點 */
.milestone.right {
  align-self: flex-end;
  margin-right: 5%;
}

.milestone.right::after {
  left: -50px; /* 連接線指向左側中央軸線 */
}

.milestone.right::before {
  left: -58px; /* 圓點在連接線末端 */
}

/* 右側節點偏移變體 */
.milestone.right.offset-small {
  margin-right: 3%;
}

.milestone.right.offset-medium {
  margin-right: 10%;
}

.milestone.right.offset-large {
  margin-right: 15%;
}

/* 中央節點（特殊） */
.milestone.center {
  align-self: center;
  max-width: 450px; /* 中央節點稍大 */
}

.milestone.center::after {
  display: none; /* 中央節點不需要連接線 */
}

.milestone.center::before {
  left: 50%;
  transform: translateX(-50%) translateY(-50%); /* 圓點在節點正中央 */
}

.milestone.special {
  transform: scale(1.1);
}

/* 節點懸停效果 */
.milestone:hover {
  transform: scale(1.05);
  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.milestone.center:hover {
  transform: scale(1.15);
}

.milestone.special:hover {
  transform: scale(1.2);
}

/* 日期標籤 - 極光風格 */
.milestone-date {
  background: linear-gradient(135deg, 
    rgba(34, 211, 238, 0.9), 
    rgba(147, 51, 234, 0.9),
    rgba(16, 185, 129, 0.9)
  );
  color: white;
  padding: 0.6rem 1.2rem;
  border-radius: 25px;
  font-weight: 600;
  font-size: 0.9rem;
  margin-bottom: 1rem;
  display: inline-block;
  box-shadow: 
    0 4px 20px rgba(34, 211, 238, 0.3),
    0 0 15px rgba(147, 51, 234, 0.2);
  letter-spacing: 0.5px;
  border: 1px solid rgba(255, 255, 255, 0.2);
  backdrop-filter: blur(10px);
  text-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
}

/* 內容容器 - 極光風格 */
.milestone-content {
  background: rgba(15, 15, 35, 0.8);
  border: 1px solid rgba(34, 211, 238, 0.2);
  color: rgba(255, 255, 255, 0.9);
  backdrop-filter: blur(20px);
  border-radius: 20px;
  padding: 1.5rem;
  box-shadow: 
    0 10px 40px rgba(0, 0, 0, 0.2),
    0 0 0 1px rgba(255, 255, 255, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.2);
  border: 1px solid rgba(255, 255, 255, 0.15);
  position: relative;
  overflow: show;
  transition: all 0.3s ease;
  z-index: 31; /* 里程碑內容 */
}

.milestone:hover .milestone-content {
  background: rgba(15, 15, 35, 0.9);
  box-shadow: 
    0 15px 50px rgba(0, 0, 0, 0.5),
    0 0 30px rgba(34, 211, 238, 0.2),
    0 0 0 1px rgba(34, 211, 238, 0.3);
}

/* 圖片容器 */
.milestone-image {
  width: 100%;
  height: 180px;
  border-radius: 12px;
  overflow: hidden;
  margin-bottom: 1rem;
  position: relative;
}

.milestone-image img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
  filter: brightness(0.9) contrast(1.1);
}

.milestone:hover .milestone-image img {
  transform: scale(1.1) rotate(1deg);
}

/* 標題樣式 */
.milestone-content h3 {
  color: rgba(255, 255, 255, 0.95);
  text-shadow: 0 0 10px rgba(34, 211, 238, 0.3);
  margin-bottom: 0.8rem;
  font-size: 1.2rem;
  font-weight: 700;
  line-height: 1.3;
}

/* 描述文字 */
.milestone-content p {
  color: rgba(255, 255, 255, 0.8);
  line-height: 1.6;
  margin: 0 0 0.5rem 0; /* 添加段落間距 */
  font-size: 0.95rem;
}

/* 動畫效果 */
@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(40px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* 滾動觸發動畫 */
.milestone {
  animation-fill-mode: both;
  animation-delay: calc(var(--delay, 0) * 0.2s);
}

/* 特殊節點額外效果 */
.milestone.special::before {
  content: '';
  position: absolute;
  top: -10px;
  left: -10px;
  right: -10px;
  bottom: -10px;
  background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
  border-radius: 25px;
  z-index: -1;
  opacity: 0.1;
  animation: pulse 3s ease-in-out infinite;
}

@keyframes pulse {
  0%, 100% { transform: scale(1); opacity: 0.1; }
  50% { transform: scale(1.05); opacity: 0.2; }
}

/* 響應式設計 */
@media (max-width: 768px) {
  .journey-timeline {
    margin: 2rem 0;
  }
  
  .timeline-path {
    gap: 2rem; /* 減少手機版間距 */
  }
  
  .milestone {
    max-width: 100% !important;
    margin-left: 0 !important;
    margin-right: 0 !important;
    align-self: center !important; /* 手機版居中 */
  }
  
  .milestone-image {
    height: 200px;
  }
  
  .lead-paragraph {
    font-size: 1.1rem;
    padding: 0 1rem;
  }
}

@media (max-width: 480px) {
  .milestone-content {
    padding: 1rem;
  }
  
  .milestone-image {
    height: 160px;
  }
  
  .milestone-date {
    font-size: 0.8rem;
    padding: 0.4rem 0.8rem;
  }
  
  .timeline-path {
    gap: 1.5rem;
  }
}

/* 手機版本 - 移除時間軸視覺元素，保持簡潔 */
@media (max-width: 768px) {
  .timeline-path::before {
    display: none; /* 隱藏中央軸線 */
  }

  .milestone::after {
    display: none; /* 隱藏連接線 */
  }

  .milestone::before {
    display: none; /* 隱藏圓點 */
  }

  .milestone {
    align-self: stretch !important; /* 手機版全寬 */
    margin: 0 !important; /* 移除左右邊距 */
    max-width: none !important; /* 移除寬度限制 */
  }
}

/* 平板和小螢幕 - 簡化時間軸元素 */
@media (max-width: 1024px) and (min-width: 769px) {
  .timeline-path::before {
    width: 4px; /* 較細的軸線但比手機版粗 */
    box-shadow: 0 0 8px rgba(0, 123, 255, 0.4); /* 較淡的光暈 */
  }

  .milestone::after {
    width: 40px; /* 較短的連接線 */
    height: 3px;
  }

  .milestone.left::after {
    right: -40px;
  }

  .milestone.left::before {
    right: -48px;
  }

  .milestone.right::after {
    left: -40px;
  }

  .milestone.right::before {
    left: -48px;
  }
}
